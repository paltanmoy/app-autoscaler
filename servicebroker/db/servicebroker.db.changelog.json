{
  "databaseChangeLog": [{
    "changeSet": {
      "id": 1,
      "author": "ying",
      "changes": [{
        "createTable": {
          "tableName": "service_instance",
          "columns": [{
            "column": {
              "name": "service_instance_id",
              "type": "varchar(40)",
              "constraints": {
                "primaryKey": true,
                "nullable": false
              }
            }
          }, {
            "column": {
              "name": "org_id",
              "type": "varchar(40)",
              "constraints": {
                "nullable": false
              }
            }
          }, {
            "column": {
              "name": "space_id",
              "type": "varchar(40)",
              "constraints": {
                "nullable": false
              }
            }
          }]
        }
      }]
    }
  }, {
    "changeSet": {
      "id": 2,
      "author": "qy",
      "changes": [{
        "createTable": {
          "tableName": "binding",
          "columns": [{
            "column": {
              "name": "binding_id",
              "type": "varchar(40)",
              "constraints": {
                "primaryKey": true,
                "nullable": false
              }
            }
          }, {
            "column": {
              "name": "service_instance_id",
              "type": "varchar(40)",
              "constraints": {
                "nullable": false
              }
            }
          }, {
            "column": {
              "name": "app_id",
              "type": "varchar(40)",
              "constraints": {
                "nullable": false
              }
            }
          }, {
            "column": {
              "name": "created_at",
              "type": "timestamp",
              "constraints": {
                "nullable": false
              }
            }
          }]
        }
      }]
    }
  }, {
    "changeSet": {
      "id": 3,
      "author": "qy",
      "changes": [{
        "addForeignKeyConstraint": {
          "baseColumnNames": "service_instance_id",
          "baseTableName": "binding",
          "constraintName": "fk_binding_service_instance_id",
          "deferrable": false,
          "initiallyDeferred": false,
          "onDelete": "RESTRICT",
          "onUpdate": "RESTRICT",
          "referencedColumnNames": "service_instance_id",
          "referencedTableName": "service_instance"
        }
      }]

    }
  },{
    "changeSet":{
      "id": 4,
      "author": "paltanmoy",
      "changes": [{
        "createTable": {
          "tableName": "credentials",
          "columns": [{
            "column": {
              "name": "binding_id",
              "type": "varchar(40)",
              "constraints": {
                "nullable": false
              }
            }
          },{
            "column": {
            "name": "username",
            "type": "varchar(100)",
            "constraints": {
              "primaryKey": true,
              "nullable": false
            }
          }},{
            "column": {
              "name": "password",
              "type": "varchar(100)",
              "constraints": {
                "nullable": false
              }
            }
          }]
        }, "addForeignKeyConstraint":{
          "baseColumnNames": "binding_id",
          "baseTableName": "credentials",
          "constraintName": "fk_credentials_binding",
          "deferrable": true,
          "initiallyDeferred": true,
          "onDelete": "CASCADE",
          "onUpdate": "CASCADE",
          "referencedColumnNames": "binding_id",
          "referencedTableName": "binding"
        }, "createIndex": {
          "columns": [
            {
              "column": {
                "name": "username",
                "type": "varchar(255)"
              }
            }]
          ,
          "indexName": "idx_credentials",
          "tableName": "credentials"
        }
      }]
    }
  }]
}
